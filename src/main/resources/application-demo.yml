# US#32 - Configuração DEMO com Seed de Dados
spring:
  application:
    name: backoffice-alerta
  
  # H2 em memória para DEMO
  datasource:
    url: jdbc:h2:mem:backoffice_alerta_demo
    username: SA
    password:
    driver-class-name: org.h2.Driver
  
  # JPA/Hibernate
  jpa:
    hibernate:
      ddl-auto: none  # Flyway gerencia schema
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
  
  # Flyway
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
  
  # H2 Console
  h2:
    console:
      enabled: true
      path: /h2-console

# Seed de dados DEMO
seed:
  enabled: true

# US#52 - Configuração de tokens Git (via variáveis de ambiente)
git:
  github:
    token: ${GITHUB_TOKEN:}
  gitlab:
    token: ${GITLAB_TOKEN:}

# US#64 - Cache de embeddings de query
# US#65 - Provider de embeddings real
rag:
  query-embedding-cache:
    enabled: true
    ttl-minutes: 30
    max-entries: 1000
  embedding:
    provider: SENTENCE_TRANSFORMER  # DUMMY | SENTENCE_TRANSFORMER | OPENAI
    timeout-seconds: 10
    enable-fallback: true
    # openai-api-key: ${OPENAI_API_KEY:}  # Apenas para OPENAI
    # openai-api-url: https://api.openai.com/v1
  vector-store:  # US#66 - Persistência de embeddings
    type: JPA  # JPA | MEMORY
    persist: true
  
# Logging
logging:
  level:
    com.backoffice.alerta: INFO
    org.springframework.security: WARN
    org.hibernate: WARN
